<nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="..">Tech</a></li>
    <li class="breadcrumb-item"><a href="#" onclick="loadPage('content/home/main.html')">Kodi</a></li>
    <li class="breadcrumb-item active" aria-current="page">Media Library</li>
  </ol>
</nav>

<h1 class="display-4">Media Content and Library</h1>
<p class="mt-3">Kodi, being media center software, can manage multimedia files and can process metadata associated with media files. This section will describe how Kodi uses a library to display media and how content not in Kodi's library is accessed.</p>

<h4 class="mt-4">Metadata</h4>
<p class="mt-2">Metadata is information that describes the media file for movies, TV shows, music videos and music. Information in metadata often includes the title, plot, actors, studio, resolution, etc. Kodi uses the information in metadata to build the library - content "known" to Kodi. Most metadata exists in a separate text file called an <b>NFO</b> file.</p> 

<p class="mt-2">The music library in Kodi does not rely on individual NFO files to describe the content. Instead, the music files (the files for each individual song title) have <b>tags</b> embedded into the file. Without these tags Kodi cannot add the tracks to the library and they will not appear in the Music section in Kodi.</p>

<p class="mt-2 note" role="alert">Nearly all content in Kodi's library has a corresponding NFO file. Sources in Kodi are configured to use the NFO files for populating the library databases.</p>


<h4 class="mt-4">File and Folder Structure</h4>
<p class="mt-2">The mini-computers that are used for the Kodi boxes have 500 GB of internal storage. However, except for specific circumstances, no content is stored to the local disk of the Kodi box. Instead, content is stored on a central <b>Network-Attached Storage</b> device (NAS) that is referred to as "the server". All Kodi boxes pull the content off the server using a mount point to simulate the content being local.</p>

<p class="mt-2">Nearly all content exists in two shares on the server: <b>Media</b> and <b>Media2</b>. When the directory layout was conceived a decade ago the folders were laid-out with using the "Profiles" feature of Kodi in mind. The idea was to limit content in Kodi depending on the profile. For example, Adam's profile would use the folders "Adam" and "Everyone" when defining sources in Kodi.</p>

<p class="mt-2">The following table lists the folders in the <b>Media</b> share where the bulk of content resides.</p>

<div class="mt-3 mx-5 table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th class="nowrap">Folder Name</th>
      <th>Description</th>
    </tr>
  </thead>  
  <tbody>
    <tr>
      <td>admin</td>
      <td>Contains notes, graphics, and set information for supporting media in Kodi.</td>
    </tr>

    <tr>
      <td>Adam</td>
      <td>Location of Movies, TV Shows, Music, Pictures, streams of interest to Adam</td>
    </tr>

    <tr>
      <td>Donna</td>
      <td>Location of Movies, TV Shows, Music, Pictures, streams of interest to Donna</td>
    </tr>

    <tr>
      <td>Everyone</td>
      <td>Location of Movies, TV Shows, Music, Pictures, streams of interest to everyone in the house</td>
    </tr>
    
    <tr>
      <td>Joey</td>
      <td>Location of Movies, TV Shows, Music, Pictures, streams of interest to Joey</td>
    </tr>

    <tr>
      <td>Other</td>
      <td>Content that is not included in any library in Kodi. Content is accessible directly or via playlists.</td>
    </tr>

  </tbody>
</table>
</div>


<h5 class="mt-4">Movies</h5>
<p class="mt-2">Individual movies and all metadata files are kept in their own folder. For example the following table shows the files that are stored on the disk for the movie <b>2001: A Space Odyssey (1968)</b> and are stored in the directory <i>/mnt/user/Media/Joey/Movies/2001 A Space Odyssey (1968)</i>.</p>

<div class="mt-3 mx-5 table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th class="nowrap">File Name</th>
      <th>Description</th>
    </tr>
  </thead>  
  <tbody>
    <tr>
      <td>2001 A Space Odyssey (1968)-banner.jpg</td>
      <td>The banner image when viewing library using "Banners" instead of "Posters"</td>
    </tr>

    <tr>
      <td>2001 A Space Odyssey (1968)-fanart.jpg</td>
      <td>Large background image displayed when viewing properties of the movie</td>
    </tr>

    <tr>
      <td>2001 A Space Odyssey (1968)-poster.jpg</td>
      <td>The poster image used when library displayed using "Posters" instead of "Banners"</td>
    </tr>

    <tr>
      <td>2001 A Space Odyssey (1968)-thumb.jpg</td>
      <td>The thumbnail image of the movie</td>
    </tr>

    <tr>
      <td>2001 A Space Odyssey (1968).mkv</td>
      <td>The actual media file of the movie</td>
    </tr>

    <tr>
      <td>2001 A Space Odyssey (1968).nfo</td>
      <td>The NFO file containing the details (metadata) of the movie</td>
    </tr>

    <tr>
      <td>2001 A Space Odyssey (1968).tbn</td>
      <td>Thumbnail image in deprecated file name format</td>
    </tr>

    <tr>
      <td>folder.jpg</td>
      <td>The default image Kodi will display when viewing a folder</td>
    </tr>

    <tr>
      <td>poster.jpg</td>
      <td>Poster image in deprecated file name format</td>
    </tr>

    <tr>
      <td>thumb.jpg</td>
      <td>Thumbnail image in (really old) deprecated file name format</td>
    </tr>

  </tbody>
</table>
</div>


<h5 class="mt-4">TV Shows</h5>
<p class="mt-2">Information for TV shows are stored in a similar manner. For example the following table shows the files that are stored on the disk for the TV show <b>M*A*S*H</b> and are stored in the directory <i>/mnt/user/Media/Everyone/TV/M-A-S-H</i>.</p>

<div class="mt-3 mx-5 table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th class="nowrap">File Name</th>
      <th>Description</th>
    </tr>
  </thead>  
  <tbody>

    <tr>
      <td>M-A-S-H-poster.jpg</td>
      <td>The poster image used when library displayed using "Posters" instead of "Banners"</td>
    </tr>

    <tr>
      <td>banner.jpg</td>
      <td>The banner image when viewing library using "Banners" instead of "Posters"</td>
    </tr>

    <tr>
      <td>fanart.jpg</td>
      <td>Large background image displayed when viewing properties of the TV show</td>
    </tr>

    <tr>
      <td>poster.jpg</td>
      <td>Poster image in deprecated file name format</td>
    </tr>

    <tr>
      <td>tvshow.nfo</td>
      <td>The NFO file containing the details (metadata) of the show</td>
    </tr>

  </tbody>
</table>
</div>

<p class="mt-2">Episodes for TV shows are saved to individual folders named something like <b>Season 01</b>, <b>Season 02</b>, <b>Season 03</b>, etc. </p>

<div class="mt-3 mx-5 table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th class="nowrap">File Name</th>
      <th>Description</th>
    </tr>
  </thead>  
  <tbody>
    
    <tr>
      <td>M-A-S-H - 1x01 - M-A-S-H the Pilot-thumb.jpg</td>
      <td>Thumbnail image of the episode</td>
    </tr>

    <tr>
      <td>M-A-S-H - 1x01 - M-A-S-H the Pilot.mkv</td>
      <td>The media file itself for the individual episode(s) of the TV show</td>
    </tr>

    <tr>
      <td>M-A-S-H - 1x01 - M-A-S-H the Pilot.nfo</td>
      <td>The metadata file for the episode(s) contained in the media file</td>
    </tr>

  </tbody>
</table>
</div>

<p class="mt-2">Other files can include subtitles, clear-art, logos, etc. Kodi will also create a folder named <b>.actors</b> into which a thumbnail of each actor in the TV show will be saved.</p>


<h4 class="mt-5">Media Quality vs File Size</h4>
<p class="mt-2">The media files on the server are saved to be played as-is by Kodi. Care is taken to find a balance between a good quality image and small file size. There are many factors that affect file size of a media file when transcoded. Some examples, include the resolution (480, 720, 1080, etc.), the desired quality, the amount of action, and the amount of brightness in the video. I have found movies with alot of action, like Transformers, will create a larger file compared to a movie of similar length that has mostly dark scenes.</p>

<p class="mt-2">The following table lists the target size for media I try to achieve based on the type of content. Some videos may be larger based on a preference for better quality or 1080p instead of the base target of 720p.</p>

<div class="mt-3 mx-5 table-responsive">
  <table class="table">
  <thead>
    <tr>
      <th class="nowrap">Media Description</th>
      <th class="nowrap">Target File Size</th>
    </tr>
  </thead>  
  <tbody>
    
    <tr>
      <td>1.5 hour long movie with medium pace and even number of dark and light scenes like <i>Moon (2009)</i>.</td>
      <td>2 GB</td>
    </tr>
    <tr>
      <td>2.5 hour long movie with medium pace and even number of dark and light scenes like <i>Mr. Nobody (2009)</i>.</td>
      <td>3 GB</td>
    </tr>
    <tr>
      <td>2.5 hour long movie with a fast pace and mostly light scenes with alot of action like <i>Transformers Revenge of the Fallen (2009)</i>.</td>
      <td>3.5 GB</td>
    </tr>
  
    <tr>
      <td>30 minute episode for a sitcom like <i>Frasier (2023)</i></td>
      <td>750 MB</td>
    </tr>
    <tr>
      <td>25 minute episode in 480p for a sitcom like <i>Cheers (1982)</i></td>
      <td>500 MB</td>
    </tr>
    <tr>
      <td>25 minute episode in 720p for an animated show like <i>Futurama (2024)</i></td>
      <td>750 MB</td>
    </tr>

  </tbody>
</table>
</div>

<p class="mt-2">Of course, these targets are ever evolving and will change as storage costs go down (allowing for larger files on more storage), remastered releases like 4K blu-rays, and larger screens. As TV screens get larger artifacts may become visible during playback. When this happens the blu-ray will be re-ripped and re-transcoded to a larger resolution.</p>


<h4 class="mt-5">Why not Plex or Jellyfin?</h4>
<p class="mt-2">Unlike Plex or Jellyfin, Kodi does not do transcoding. As I understand it, Plex and Jellyfin allow you to stream a media file from a Plex or Jellyfin server to a Kodi client. The Plex or Jellyfin server take the original file and transcodes it on-the-fly to the client based on the codecs supported by the client (Kodi) and the network conditions. For best results, the media file should be the best quality which would result in a larger file size.</p>

<p class="mt-2">If a movie saved in HD-720 is good enough and can be played directly by Kodi across a WiFi network, then the larger file and additional servers (Plex or Jellyfin) are no-longer justified. With the files on the server as they a currently saved these servers would be re-transcoding and sending the files at the quality they exist. The only real benefit I see to Plex or Jellyfin is the ability to stream content away from home over the internet.</p>




<h4 class="mt-5"></h4>
<p class="mt-2"></p>

<h4 class="mt-5"></h4>
<p class="mt-2"></p>

<p class="mt-2"></p>

<p class="mt-2"></p>




<div class="mt-5">
<pre>
  - Sonarr/Radarr
  - UPnP
</pre>
</div>


<p class="footnote mt-5">kodi/content/media/main.html</p>

